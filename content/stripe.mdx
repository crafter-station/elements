---
title: "Stripe"
description: "Complete payment components built with Stripe. Checkout forms, subscription management, and payment processing."
category: "PAYMENTS & BILLING"
brandColor: "#635BFF"
darkBrandColor: "#7C7CE8"
icon: "ðŸ’³"
installCommand: "bunx shadcn@latest add @elements/stripe"
showRegistryVisualizer: true
layout:
  type: "auto"
  columns: 2
  gap: "lg"
features:
  - icon: "ðŸ›’"
    title: "Checkout Components"
    description: "Complete checkout flows with payment processing"
  - icon: "ðŸ“±"
    title: "Mobile Optimized"
    description: "Perfect payment experience on all devices"
  - icon: "ðŸ”’"
    title: "PCI Compliant"
    description: "Secure payment handling with Stripe Elements"
---

# Stripe Payment Components

Production-ready payment components built with Stripe Elements and the Stripe API. Handle payments, subscriptions, and billing with ease.

## Getting Started

### Prerequisites

You'll need a Stripe account and API keys:

1. Create a [Stripe account](https://stripe.com)
2. Get your API keys from the Stripe Dashboard
3. Install required dependencies

```bash
npm install stripe @stripe/stripe-js @stripe/react-stripe-js
```

### Environment Setup

Add your Stripe keys to `.env.local`:

```env
STRIPE_SECRET_KEY=sk_test_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
```

### Stripe Provider Setup

Wrap your app with the Stripe provider:

```tsx
// app/layout.tsx
import { StripeProvider } from '@/components/stripe/provider';

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        <StripeProvider>
          {children}
        </StripeProvider>
      </body>
    </html>
  );
}
```

## Components

### Payment Form

A complete payment form with card input, validation, and processing.

#### Installation

```bash
bunx shadcn@latest add @elements/stripe-payment-form
```

#### Usage

```tsx
import { PaymentForm } from '@/components/stripe/payment-form';

export default function CheckoutPage() {
  return (
    <div className="container mx-auto py-8">
      <PaymentForm 
        amount={2999} // $29.99 in cents
        currency="usd"
        onSuccess={(paymentIntent) => {
          console.log('Payment successful:', paymentIntent);
        }}
        onError={(error) => {
          console.error('Payment failed:', error);
        }}
      />
    </div>
  );
}
```

#### Props

| Prop | Type | Description |
|------|------|-------------|
| `amount` | `number` | Amount in smallest currency unit (cents) |
| `currency` | `string` | Currency code (e.g., 'usd', 'eur') |
| `onSuccess` | `function` | Called when payment succeeds |
| `onError` | `function` | Called when payment fails |
| `metadata` | `object` | Additional metadata for the payment |

### Subscription Checkout

Handle recurring payments and subscription setup.

#### Installation

```bash
bunx shadcn@latest add @elements/stripe-subscription
```

#### Usage

```tsx
import { SubscriptionCheckout } from '@/components/stripe/subscription';

export default function SubscribePage() {
  return (
    <SubscriptionCheckout 
      priceId="price_1234567890"
      customerId="cus_1234567890"
      successUrl="/dashboard?success=true"
      cancelUrl="/pricing"
    />
  );
}
```

### Customer Portal

Let customers manage their subscriptions and billing.

#### Installation

```bash
bunx shadcn@latest add @elements/stripe-portal
```

#### Usage

```tsx
import { CustomerPortal } from '@/components/stripe/portal';

export default function BillingPage() {
  return (
    <div className="container mx-auto py-8">
      <CustomerPortal 
        customerId="cus_1234567890"
        returnUrl="/dashboard"
      />
    </div>
  );
}
```

## Server Actions

### Create Payment Intent

```typescript
// app/actions/stripe.ts
'use server'

import { stripe } from '@/lib/stripe';

export async function createPaymentIntent(amount: number, currency: string = 'usd') {
  try {
    const paymentIntent = await stripe.paymentIntents.create({
      amount,
      currency,
      automatic_payment_methods: {
        enabled: true,
      },
    });

    return { clientSecret: paymentIntent.client_secret };
  } catch (error) {
    throw new Error('Failed to create payment intent');
  }
}
```

### Create Subscription

```typescript
// app/actions/subscription.ts
'use server'

import { stripe } from '@/lib/stripe';

export async function createSubscription(customerId: string, priceId: string) {
  try {
    const subscription = await stripe.subscriptions.create({
      customer: customerId,
      items: [{ price: priceId }],
      payment_behavior: 'default_incomplete',
      payment_settings: { save_default_payment_method: 'on_subscription' },
      expand: ['latest_invoice.payment_intent'],
    });

    return {
      subscriptionId: subscription.id,
      clientSecret: subscription.latest_invoice?.payment_intent?.client_secret,
    };
  } catch (error) {
    throw new Error('Failed to create subscription');
  }
}
```

## Webhook Setup

Handle Stripe webhooks for payment confirmations and subscription updates:

```typescript
// app/api/webhooks/stripe/route.ts
import { headers } from 'next/headers';
import { stripe } from '@/lib/stripe';
import Stripe from 'stripe';

export async function POST(req: Request) {
  const body = await req.text();
  const signature = headers().get('stripe-signature') as string;

  let event: Stripe.Event;

  try {
    event = stripe.webhooks.constructEvent(
      body,
      signature,
      process.env.STRIPE_WEBHOOK_SECRET!
    );
  } catch (err) {
    return new Response('Invalid signature', { status: 400 });
  }

  switch (event.type) {
    case 'payment_intent.succeeded':
      const paymentIntent = event.data.object;
      // Handle successful payment
      break;
    case 'customer.subscription.created':
      const subscription = event.data.object;
      // Handle new subscription
      break;
    default:
      console.log(`Unhandled event type ${event.type}`);
  }

  return new Response('OK', { status: 200 });
}
```

## Advanced Features

### Multi-Party Payments

Handle marketplace payments with Stripe Connect:

```tsx
import { ConnectPaymentForm } from '@/components/stripe/connect-payment';

<ConnectPaymentForm 
  amount={5000}
  applicationFee={500}
  connectedAccountId="acct_1234567890"
/>
```

### Payment Methods

Save and reuse payment methods:

```tsx
import { SavedPaymentMethods } from '@/components/stripe/saved-methods';

<SavedPaymentMethods 
  customerId="cus_1234567890"
  onSelect={(paymentMethod) => {
    // Use selected payment method
  }}
/>
```

### Pricing Tables

Display pricing with Stripe's pricing tables:

```tsx
import { PricingTable } from '@/components/stripe/pricing-table';

<PricingTable 
  pricingTableId="prctbl_1234567890"
  publishableKey={process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY}
/>
```

## Styling & Customization

Customize Stripe Elements to match your brand:

```tsx
<PaymentForm 
  amount={2999}
  appearance={{
    theme: 'stripe',
    variables: {
      colorPrimary: '#0570de',
      colorBackground: '#ffffff',
      colorText: '#30313d',
      colorDanger: '#df1b41',
      fontFamily: 'Ideal Sans, system-ui, sans-serif',
      spacingUnit: '2px',
      borderRadius: '4px',
    },
  }}
/>
```

## Security Best Practices

1. **Never expose secret keys**: Keep secret keys on the server only
2. **Validate webhooks**: Always verify webhook signatures
3. **Use HTTPS**: Ensure all payment pages use HTTPS
4. **PCI Compliance**: Use Stripe Elements for card input
5. **Amount validation**: Validate amounts server-side

## Testing

Use Stripe's test cards for development:

```tsx
// Test card numbers
const testCards = {
  visa: '4242424242424242',
  visaDebit: '4000056655665556',
  mastercard: '5555555555554444',
  amex: '378282246310005',
  declined: '4000000000000002',
};
```

## Error Handling

```tsx
<PaymentForm 
  amount={2999}
  onError={(error) => {
    switch (error.code) {
      case 'card_declined':
        toast.error('Your card was declined');
        break;
      case 'insufficient_funds':
        toast.error('Insufficient funds');
        break;
      default:
        toast.error('An error occurred. Please try again.');
    }
  }}
/>
```

## Examples

### One-Time Payment

```tsx
export default function ProductCheckout() {
  return (
    <div className="max-w-md mx-auto">
      <div className="mb-6">
        <h2 className="text-xl font-semibold">Complete your purchase</h2>
        <p className="text-muted-foreground">Premium Plan - $29.99</p>
      </div>
      
      <PaymentForm 
        amount={2999}
        currency="usd"
        metadata={{ product: 'premium-plan' }}
        onSuccess={() => router.push('/success')}
      />
    </div>
  );
}
```

### Subscription Management

```tsx
export default function BillingDashboard() {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-2xl font-bold mb-6">Billing & Subscriptions</h1>
      
      <div className="grid gap-6 md:grid-cols-2">
        <Card>
          <CardHeader>
            <CardTitle>Current Plan</CardTitle>
          </CardHeader>
          <CardContent>
            <SubscriptionStatus customerId="cus_1234567890" />
          </CardContent>
        </Card>
        
        <Card>
          <CardHeader>
            <CardTitle>Payment Methods</CardTitle>
          </CardHeader>
          <CardContent>
            <SavedPaymentMethods customerId="cus_1234567890" />
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
```